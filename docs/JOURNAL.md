# Worker Analytics — Журнал работ
> Последнее обновление: 2025-10-20T17:59:21+03:00

## 2025-10-16 — Документация (каркас)
- Что сделали: добавили CONTEXT.md и JOURNAL.md, зафиксировали цели, API и проблемы.
- Зачем: чтобы любой разработчик/ИИ мог подхватить проект без раскопок.
- Как проверить: файлы есть в `docs/`, ссылки открываются на GitHub.

## 2025-10-15 — Дашборд: топ товаров на v3 + кнопка «текущий месяц»
- Что: фронт переведён на `/api/top/products_v3`; колонкам сопоставлены `product_id|name, revenue, sold_qty, avg_price, inflow_qty, inflow_cost`. Кнопка «Текущий месяц» — диапазон 1-е число…вчера.
- Зачем: единый контракт ответа и корректные даты.
- Проверка: /dashboard грузит таблицу; сетка дат ставит нужные значения; API отдаёт 200.

## 2025-10-15 — Синк inflow (оприходования)
- Что: установлены недостающие зависимости (`httpx`, `sqlalchemy`, `pydantic_settings`, `psycopg`), скрипт синка отработал, появились суммы по дням.
- Зачем: закрыть провалы в данных.
- Проверка: `python3 -m app.sync_inflow_daily` на диапазон, затем `GET /api/inflow/daily`.

## 2025-10-15 — Синк списаний (writeoff)
- Что: попытка правок фильтра `moment` и ретраев; пойманы 400 от МойСклад.
- Зачем: наладить загрузку себестоимости по причинам (брак/инвентаризация/прочее).
- Статус: требуется корректный формат фильтра и авторизация; добавить дамп тела ответа на 4xx.

## 2025-10-15 — Починка запуска FastAPI
- Что: импорты в `app.main` завернули в safe-fallback, чтобы сервер не падал, если нет части функций.
- Зачем: чтобы /dashboard и /health были доступны, пока доводим API.
- Риски: заглушки возвращают `{"data":[]}` — фронт не видит данных, если забыть вернуть реальные функции.

## Следующий шаг
- Заполнить CONTEXT/JOURNAL реальным содержимым (этот документ — старт) и добавить RUNBOOK.md.
